!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";function r(e,t){if(e){"string"==typeof e?e=document.querySelectorAll(e):e.tagName&&(e=[e]);for(var n=0;n<e.length;n++)(" "+e[n].className+" ").indexOf(" "+t+" ")<0&&(e[n].className+=" "+t)}}function c(e,t){if(e){"string"==typeof e?e=document.querySelectorAll(e):e.tagName&&(e=[e]);for(var n=new RegExp("(^| )"+t+"($| )","g"),i=0;i<e.length;i++)e[i].className=e[i].className.replace(n," ")}}!function(){var n,i,o;document.querySelectorAll(".cases .item").forEach(function(t){t.addEventListener("mouseover",function(e){e.preventDefault(),c(document.getElementsByClassName("img__active"),"img__active"),c(document.getElementsByClassName("sub__active"),"sub__active"),r(t.children[0],"img__active"),r(document.getElementById("sub-"+t.dataset.icon),"sub__active")},!1)}),document.querySelectorAll("pre code").forEach(function(e){hljs.highlightBlock(e)}),tocbot.init({tocSelector:".post-toc-html",contentSelector:".post-inner-html",headingSelector:"h1, h2, h3",hasInnerContainers:!0}),$("#backtop").click(function(){$("html, body").animate({scrollTop:0},800)}),$(".share > .share-item").hover(function(){r($(this).children(".n-icon"),$(this).children(".n-icon")[0].classList[1]+"-select")},function(){c($(this).children(".n-icon"),$(this).children(".n-icon")[0].classList[2])}),$(".footer-info > .social").hover(function(){r($(this).children(".n-icon"),$(this).children(".n-icon")[0].classList[1]+"-select")},function(){c($(this).children(".n-icon"),$(this).children(".n-icon")[0].classList[2])}),$("#mobile-menu-open").click(function(){$(".header-menu-mobile-menu").fadeIn(300),r($("body"),"mobile-menu-fixed")}),$("#mobile-menu-close").click(function(){$(".header-menu-mobile-menu").fadeOut(300),c($("body"),"mobile-menu-fixed")}),window.addEventListener("scroll",(n=function(){100<(document.documentElement.scrollTop||document.body.scrollTop)?(r(".sidebar","sidebar-fixed"),$("#backtop").fadeIn(300)):(c(".sidebar","sidebar-fixed"),$("#backtop").fadeOut(300))},function(){var e=i||this,t=arguments;o=o||setTimeout(function(){n.apply(e,t),o=null},80)}));var e=document.querySelector("#widget");new PerfectScrollbar(e);var t=new Swiper(".swiper-container",{autoplay:{delay:1e4},autoHeight:!0,pagination:{el:".swiper-pagination",bulletActiveClass:"article-gallery-active"}});t.slides&&t.slides.length<=1&&t.destroy();e={title:!1,toolbar:{zoomIn:!0,zoomOut:!0,reset:!0,prev:!0,next:!0},keyboard:!1},t=$(".article-gallery");t&&0<t.length&&t.viewer(e);t=$(".article-entry");t&&0<t.length&&t.viewer(e),window.isPost&&Array.from($("article video")).map(function(e){return new Plyr(e)}),Array.from($("article .article-video-plyr")).map(function(e){return new Plyr(e)}),new LazyLoad}(),window.aomori&&window.aomori.gitalk&&(window.aomori.gitalk.id=md5(window.location.href),new Gitalk(window.aomori.gitalk).render("gitalk-container"));var e,i,o;e="/search.xml",i="search",o="search-ps",$.ajax({url:e,dataType:"xml",success:function(e){var t=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),e=document.getElementById(i),n=document.getElementById(o);e.addEventListener("input",function(){$(".search-result").slideDown();var d="",m=this.value.trim().toLowerCase().split(/[\s-]+/);if(n.innerHTML="",!(this.value.trim().length<=0)){if(t.forEach(function(e){var n=!0;e.title&&""!==e.title.trim()||(e.title="Untitled");var i,t,o,r,c=e.title.trim().toLowerCase(),a=e.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),l=e.url,s=-1,u=-1;""!==a?m.forEach(function(e,t){i=c.indexOf(e),s=a.indexOf(e),i<0&&s<0?n=!1:(s<0&&(s=0),0==t&&(u=s))}):n=!1,n&&(t=e.content.trim().replace(/<[^>]+>/g,""),0<=u&&(r=u+80,(r=0==(e=(e=u-20)<0?0:e)?100:r)>t.length&&(r=t.length),o=t.substr(e,r),m.forEach(function(e){var t=new RegExp(e,"gi");o=o.replace(t,'<span class="search-result-keyword">'+e+"</span>"),c=c.replace(t,'<span class="search-result-keyword">'+e+"</span>")}),r="<span class='search-result-item'><h1><a href='"+l+"'>"+c+"</a></h1>",console.log(l),l=l.substr(0,10),d+=r+"<p>"+o+"...</p><p>"+l+"</p>"),d+="</span>")}),-1===d.indexOf("</a>"))return n.innerHTML="<p class='search-result-empty'>没有找到内容，更换下搜索词试试吧~</p>";n.innerHTML=d}})}}),$("#search").on("focusin",function(){r($(".search"),"search-focus")}),$("#search").on("focusout",function(){c($(".search"),"search-focus"),$(".search-result").slideUp()})});
